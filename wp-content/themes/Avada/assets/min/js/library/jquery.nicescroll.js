!function(b){var c=!1,d=!1,e=5e3,f=2e3,g=0,h=b,i=function(){var a=document.getElementsByTagName("script"),b=a[a.length-1].src.split("?")[0];return b.split("/").length>0?b.split("/").slice(0,-1).join("/")+"/":""}(),j=["ms","moz","webkit","o"],k=window.requestAnimationFrame||!1,l=window.cancelAnimationFrame||!1;if(!k)for(var m in j){var n=j[m];k||(k=window[n+"RequestAnimationFrame"]),l||(l=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"])}var o=window.MutationObserver||window.WebKitMutationObserver||!1,p={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:"auto"},q=!1,r=function(){if(q)return q;var a=document.createElement("DIV"),b={};b.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,b.isopera="opera"in window,b.isopera12=b.isopera&&"getUserMedia"in navigator,b.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),b.isie="all"in document&&"attachEvent"in a&&!b.isopera,b.isieold=b.isie&&!("msInterpolationMode"in a.style),b.isie7=b.isie&&!b.isieold&&(!("documentMode"in document)||7==document.documentMode),b.isie8=b.isie&&"documentMode"in document&&8==document.documentMode,b.isie9=b.isie&&"performance"in window&&document.documentMode>=9,b.isie10=b.isie&&"performance"in window&&document.documentMode>=10,b.isie9mobile=/iemobile.9/i.test(navigator.userAgent),b.isie9mobile&&(b.isie9=!1),b.isie7mobile=!b.isie9mobile&&b.isie7&&/iemobile/i.test(navigator.userAgent),b.ismozilla="MozAppearance"in a.style,b.iswebkit="WebkitAppearance"in a.style,b.ischrome="chrome"in window,b.ischrome22=b.ischrome&&b.haspointerlock,b.ischrome26=b.ischrome&&"transition"in a.style,b.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,b.hasmstouch=window.navigator.msPointerEnabled||!1,b.ismac=/^mac$/i.test(navigator.platform),b.isios=b.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),b.isios4=b.isios&&!("seal"in Object),b.isandroid=/android/i.test(navigator.userAgent),b.trstyle=!1,b.hastransform=!1,b.hastranslate3d=!1,b.transitionstyle=!1,b.hastransition=!1,b.transitionend=!1;for(var c=["transform","msTransform","webkitTransform","MozTransform","OTransform"],d=0;d<c.length;d++)if(void 0!==a.style[c[d]]){b.trstyle=c[d];break}b.hastransform=0!=b.trstyle,b.hastransform&&(a.style[b.trstyle]="translate3d(1px,2px,3px)",b.hastranslate3d=/translate3d/.test(a.style[b.trstyle])),b.transitionstyle=!1,b.prefixstyle="",b.transitionend=!1;for(var c=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],e=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],f=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],d=0;d<c.length;d++)if(c[d]in a.style){b.transitionstyle=c[d],b.prefixstyle=e[d],b.transitionend=f[d];break}return b.ischrome26&&(b.prefixstyle=e[1]),b.hastransition=b.transitionstyle,b.cursorgrabvalue=function(){var c=["-moz-grab","-webkit-grab","grab"];(b.ischrome&&!b.ischrome22||b.isie)&&(c=[]);for(var d=0;d<c.length;d++){var e=c[d];if(a.style.cursor=e,a.style.cursor==e)return e}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}(),b.hasmousecapture="setCapture"in a,b.hasMutationObserver=!1!==o,a=null,q=b,b},s=function(a,b){function j(){var a=u.doc.css(w.trstyle);return!(!a||"matrix"!=a.substr(0,6))&&a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function m(){var a=u.win;if("zIndex"in a)return a.zIndex();for(;a.length>0;){if(9==a[0].nodeType)return!1;var b=a.css("zIndex");if(!isNaN(b)&&0!=b)return parseInt(b);a=a.parent()}return!1}function n(a,b,c){var d=a.css(b),e=parseFloat(d);if(isNaN(e)){e=x[d]||0;var f=3==e?c?u.win.outerHeight()-u.win.innerHeight():u.win.outerWidth()-u.win.innerWidth():1;return u.isie8&&e&&(e+=1),f?e:0}return e}function q(a,b,c,d){u._bind(a,b,function(d){var d=d||window.event,e={original:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return d.preventDefault?d.preventDefault():d.returnValue=!1,!1},stopImmediatePropagation:function(){d.stopImmediatePropagation?d.stopImmediatePropagation():d.cancelBubble=!0}};return"mousewheel"==b?(e.deltaY=-.025*d.wheelDelta,d.wheelDeltaX&&(e.deltaX=-.025*d.wheelDeltaX)):e.deltaY=d.detail,c.call(a,e)},d)}function s(a,b,c){var d,e;if(0==a.deltaMode?(d=-Math.floor(a.deltaX*(u.opt.mousescrollstep/54)),e=-Math.floor(a.deltaY*(u.opt.mousescrollstep/54))):1==a.deltaMode&&(d=-Math.floor(a.deltaX*u.opt.mousescrollstep),e=-Math.floor(a.deltaY*u.opt.mousescrollstep)),b&&u.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0),d&&(u.scrollmom&&u.scrollmom.stop(),u.lastdeltax+=d,u.debounced("mousewheelx",function(){var a=u.lastdeltax;u.lastdeltax=0,u.rail.drag||u.doScrollLeftBy(a)},120)),e){if(u.opt.nativeparentscrolling&&c&&!u.ispage&&!u.zoomactive)if(e<0){if(u.getScrollTop()>=u.page.maxh)return!0}else if(u.getScrollTop()<=0)return!0;u.scrollmom&&u.scrollmom.stop(),u.lastdeltay+=e,u.debounced("mousewheely",function(){var a=u.lastdeltay;u.lastdeltay=0,u.rail.drag||u.doScrollBy(a)},120)}return a.stopImmediatePropagation(),a.preventDefault()}var u=this;if(this.version="3.5.0 BETA5",this.name="nicescroll",this.me=b,this.opt={doc:h("body"),win:!1},h.extend(this.opt,p),this.opt.snapbackspeed=80,a)for(var v in u.opt)void 0!==a[v]&&(u.opt[v]=a[v]);this.doc=u.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(u.opt.win?u.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==u.opt.win,this.win=u.opt.win||(this.ispage?h(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?h(window):this.win,this.body=h("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=u.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.checkrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+f++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.overflowx=u.opt.overflowx,this.overflowy=u.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=r();var w=h.extend({},this.detected);this.canhwscroll=w.hastransform&&u.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&u.haswrapper,this.istouchcapable=!1,w.cantouch&&w.ischrome&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),w.cantouch&&w.ismozilla&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),u.opt.enablemouselockapi||(w.hasmousecapture=!1,w.haspointerlock=!1),this.delayed=function(a,b,c,d){var e=u.delaylist[a],f=(new Date).getTime();if(!d&&e&&e.tt)return!1;e&&e.tt&&clearTimeout(e.tt),e&&e.last+c>f&&!e.tt?u.delaylist[a]={last:f+c,tt:setTimeout(function(){u.delaylist[a].tt=0,b.call()},c)}:e&&e.tt||(u.delaylist[a]={last:f,tt:0},setTimeout(function(){b.call()},0))},this.debounced=function(a,b,c){var d=u.delaylist[a];(new Date).getTime();u.delaylist[a]=b,d||setTimeout(function(){var b=u.delaylist[a];u.delaylist[a]=!1,b.call()},c)},this.synched=function(a,b){return u.synclist[a]=b,function(){u.onsync||(k(function(){u.onsync=!1;for(a in u.synclist){var b=u.synclist[a];b&&b.call(u),u.synclist[a]=!1}}),u.onsync=!0)}(),a},this.unsynched=function(a){u.synclist[a]&&(u.synclist[a]=!1)},this.css=function(a,b){for(var c in b)u.saved.css.push([a,c,a.css(c)]),a.css(c,b[c])},this.scrollTop=function(a){return void 0===a?u.getScrollTop():u.setScrollTop(a)},this.scrollLeft=function(a){return void 0===a?u.getScrollLeft():u.setScrollLeft(a)},BezierClass=function(a,b,c,d,e,f,g){this.st=a,this.ed=b,this.spd=c,this.p1=d||0,this.p2=e||1,this.p3=f||0,this.p4=g||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=(new Date).getTime(),b=1-(a-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return b<0?this.ed:this.st+Math.round(this.df*c)},update:function(a,b){return this.st=this.getNow(),this.ed=a,this.spd=b,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},w.hastranslate3d&&w.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(a){if(!a){var b=j();if(b)return 16==b.length?-b[13]:-b[5];if(u.timerscroll&&u.timerscroll.bz)return u.timerscroll.bz.getNow()}return u.doc.translate.y},this.getScrollLeft=function(a){if(!a){var b=j();if(b)return 16==b.length?-b[12]:-b[4];if(u.timerscroll&&u.timerscroll.bh)return u.timerscroll.bh.getNow()}return u.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",!1,!0,window,1),a.dispatchEvent(b)}:document.fireEvent?this.notifyScrollEvent=function(a){var b=document.createEventObject();a.fireEvent("onscroll"),b.cancelBubble=!0}:this.notifyScrollEvent=function(a,b){},w.hastranslate3d&&u.opt.enabletranslate3d?(this.setScrollTop=function(a,b){u.doc.translate.y=a,u.doc.translate.ty=-1*a+"px",u.doc.css(w.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),b||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(a,b){u.doc.translate.x=a,u.doc.translate.tx=-1*a+"px",u.doc.css(w.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),b||u.notifyScrollEvent(u.win[0])}):(this.setScrollTop=function(a,b){u.doc.translate.y=a,u.doc.translate.ty=-1*a+"px",u.doc.css(w.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),b||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(a,b){u.doc.translate.x=a,u.doc.translate.tx=-1*a+"px",u.doc.css(w.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),b||u.notifyScrollEvent(u.win[0])})):(this.getScrollTop=function(){return u.docscroll.scrollTop()},this.setScrollTop=function(a){return u.docscroll.scrollTop(a)},this.getScrollLeft=function(){return u.docscroll.scrollLeft()},this.setScrollLeft=function(a){return u.docscroll.scrollLeft(a)}),this.getTarget=function(a){return!!a&&(a.target?a.target:!!a.srcElement&&a.srcElement)},this.hasParent=function(a,b){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=b;)c=c.parentNode||!1;return!1!==c};var x={thin:1,medium:3,thick:5};this.getOffset=function(){if(u.isfixed)return{top:parseFloat(u.win.css("top")),left:parseFloat(u.win.css("left"))};if(!u.viewport)return u.win.offset();var a=u.win.offset(),b=u.viewport.offset();return{top:a.top-b.top+u.viewport.scrollTop(),left:a.left-b.left+u.viewport.scrollLeft()}},this.updateScrollBar=function(a){if(u.ishwscroll)u.rail.css({height:u.win.innerHeight()}),u.railh&&u.railh.css({width:u.win.innerWidth()});else{var b=u.getOffset(),c={top:b.top,left:b.left};c.top+=n(u.win,"border-top-width",!0);u.win.outerWidth(),u.win.innerWidth();c.left+=u.rail.align?u.win.outerWidth()-n(u.win,"border-right-width")-u.rail.width:n(u.win,"border-left-width");var d=u.opt.railoffset;if(d&&(d.top&&(c.top+=d.top),u.rail.align&&d.left&&(c.left+=d.left)),u.locked||u.rail.css({top:c.top,left:c.left,height:a?a.h:u.win.innerHeight()}),u.zoom&&u.zoom.css({top:c.top+1,left:1==u.rail.align?c.left-20:c.left+u.rail.width+4}),u.railh&&!u.locked){var c={top:b.top,left:b.left},e=u.railh.align?c.top+n(u.win,"border-top-width",!0)+u.win.innerHeight()-u.railh.height:c.top+n(u.win,"border-top-width",!0),f=c.left+n(u.win,"border-left-width");u.railh.css({top:e,left:f,width:u.railh.width})}}},this.doRailClick=function(a,b,c){var d,e,f,g;u.locked||(u.cancelEvent(a),b?(d=c?u.doScrollLeft:u.doScrollTop,f=c?(a.pageX-u.railh.offset().left-u.cursorwidth/2)*u.scrollratio.x:(a.pageY-u.rail.offset().top-u.cursorheight/2)*u.scrollratio.y,d(f)):(d=c?u.doScrollLeftBy:u.doScrollBy,f=c?u.scroll.x:u.scroll.y,g=c?a.pageX-u.railh.offset().left:a.pageY-u.rail.offset().top,e=c?u.view.w:u.view.h,d(f>=g?e:-e)))},u.hasanimationframe=k,u.hascancelanimationframe=l,u.hasanimationframe?u.hascancelanimationframe||(l=function(){u.cancelAnimationFrame=!0}):(k=function(a){return setTimeout(a,15-Math.floor(+new Date/1e3)%16)},l=clearInterval),this.init=function(){function a(b){if(u.selectiondrag){if(b){var c=u.win.outerHeight(),d=b.pageY-u.selectiondrag.top;d>0&&d<c&&(d=0),d>=c&&(d-=c),u.selectiondrag.df=d}if(0!=u.selectiondrag.df){var e=2*-Math.floor(u.selectiondrag.df/6);u.doScrollBy(e),u.debounced("doselectionscroll",function(){a()},50)}}}function b(a){u.iframexd=!1;try{var b="contentDocument"in this?this.contentDocument:this.contentWindow.document;b.domain}catch(a){u.iframexd=!0,b=!1}if(u.iframexd)return window,!0;if(u.forcescreen=!0,u.isiframe&&(u.iframe={doc:h(b),html:u.doc.contents().find("html")[0],body:u.doc.contents().find("body")[0]},u.getContentSize=function(){return{w:Math.max(u.iframe.html.scrollWidth,u.iframe.body.scrollWidth),h:Math.max(u.iframe.html.scrollHeight,u.iframe.body.scrollHeight)}},u.docscroll=h(u.iframe.body)),!w.isios&&u.opt.iframeautoresize&&!u.isiframe){u.win.scrollTop(0),u.doc.height("");var c=Math.max(b.getElementsByTagName("html")[0].scrollHeight,b.body.scrollHeight);u.doc.height(c)}u.lazyResize(30),w.isie7&&u.css(h(u.iframe.html),{"overflow-y":"hidden"}),u.css(h(u.iframe.body),{"overflow-y":"hidden"}),w.isios&&u.haswrapper&&u.css(h(b.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?u.bind(this.contentWindow,"scroll",u.onscroll):u.bind(b,"scroll",u.onscroll),u.opt.enablemousewheel&&u.bind(b,"mousewheel",u.onmousewheel),u.opt.enablekeyboard&&u.bind(b,w.isopera?"keypress":"keydown",u.onkeypress),(w.cantouch||u.opt.touchbehavior)&&(u.bind(b,"mousedown",u.ontouchstart),u.bind(b,"mousemove",function(a){u.ontouchmove(a,!0)}),u.opt.grabcursorenabled&&w.cursorgrabvalue&&u.css(h(b.body),{cursor:w.cursorgrabvalue})),u.bind(b,"mouseup",u.ontouchend),u.zoom&&(u.opt.dblclickzoom&&u.bind(b,"dblclick",u.doZoom),u.ongesturezoom&&u.bind(b,"gestureend",u.ongesturezoom))}if(u.saved.css=[],w.isie7mobile)return!0;if(w.isoperamini)return!0;if(w.hasmstouch&&u.css(u.ispage?h("html"):u.win,{"-ms-touch-action":"none"}),u.zindex="auto",u.ispage||"auto"!=u.opt.zindex?u.zindex=u.opt.zindex:u.zindex=m()||"auto",u.ispage||"auto"==u.zindex||u.zindex>g&&(g=u.zindex),u.isie&&0==u.zindex&&"auto"==u.opt.zindex&&(u.zindex="auto"),!u.ispage||!w.cantouch&&!w.isieold&&!w.isie9mobile){var f=u.docscroll;u.ispage&&(f=u.haswrapper?u.win:u.doc),w.isie9mobile||u.css(f,{"overflow-y":"hidden"}),u.ispage&&w.isie7&&("BODY"==u.doc[0].nodeName?u.css(h("html"),{"overflow-y":"hidden"}):"HTML"==u.doc[0].nodeName&&u.css(h("body"),{"overflow-y":"hidden"})),!w.isios||u.ispage||u.haswrapper||u.css(h("body"),{"-webkit-overflow-scrolling":"touch"});var j=h(document.createElement("div"));j.css({position:"relative",top:0,float:"right",width:u.opt.cursorwidth,height:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),j.hborder=parseFloat(j.outerHeight()-j.innerHeight()),u.cursor=j;var k=h(document.createElement("div"));k.attr("id",u.id),k.addClass("nicescroll-rails");var l,n,p=["left","right"];for(var q in p)n=p[q],l=u.opt.railpadding[n],l?k.css("padding-"+n,l+"px"):u.opt.railpadding[n]=0;k.append(j),k.width=Math.max(parseFloat(u.opt.cursorwidth),j.outerWidth())+u.opt.railpadding.left+u.opt.railpadding.right,k.css({width:k.width+"px",zIndex:u.zindex,background:u.opt.background,cursor:"default"}),k.visibility=!0,k.scrollable=!0,k.align="left"==u.opt.railalign?0:1,u.rail=k,u.rail.drag=!1;var r=!1;if(!u.opt.boxzoom||u.ispage||w.isieold||(r=document.createElement("div"),u.bind(r,"click",u.doZoom),u.zoom=h(r),u.zoom.css({cursor:"pointer","z-index":u.zindex,backgroundImage:"url("+i+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),u.opt.dblclickzoom&&u.bind(u.win,"dblclick",u.doZoom),w.cantouch&&u.opt.gesturezoom&&(u.ongesturezoom=function(a){return a.scale>1.5&&u.doZoomIn(a),a.scale<.8&&u.doZoomOut(a),u.cancelEvent(a)},u.bind(u.win,"gestureend",u.ongesturezoom))),u.railh=!1,u.opt.horizrailenabled){u.css(f,{"overflow-x":"hidden"});var j=h(document.createElement("div"));j.css({position:"relative",top:0,height:u.opt.cursorwidth,width:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),j.wborder=parseFloat(j.outerWidth()-j.innerWidth()),u.cursorh=j;var s=h(document.createElement("div"));s.attr("id",u.id+"-hr"),s.addClass("nicescroll-rails"),s.height=Math.max(parseFloat(u.opt.cursorwidth),j.outerHeight()),s.css({height:s.height+"px",zIndex:u.zindex,background:u.opt.background}),s.append(j),s.visibility=!0,s.scrollable=!0,s.align="top"==u.opt.railvalign?0:1,u.railh=s,u.railh.drag=!1}if(u.ispage)k.css({position:"fixed",top:"0px",height:"100%"}),k.align?k.css({right:"0px"}):k.css({left:"0px"}),u.body.append(k),u.railh&&(s.css({position:"fixed",left:"0px",width:"100%"}),s.align?s.css({bottom:"0px"}):s.css({top:"0px"}),u.body.append(s));else{if(u.ishwscroll){"static"==u.win.css("position")&&u.css(u.win,{position:"relative"});var v="HTML"==u.win[0].nodeName?u.body:u.win;u.zoom&&(u.zoom.css({position:"absolute",top:1,right:0,"margin-right":k.width+4}),v.append(u.zoom)),k.css({position:"absolute",top:0}),k.align?k.css({right:0}):k.css({left:0}),v.append(k),s&&(s.css({position:"absolute",left:0,bottom:0}),s.align?s.css({bottom:0}):s.css({top:0}),v.append(s))}else{u.isfixed="fixed"==u.win.css("position");var x=u.isfixed?"fixed":"absolute";u.isfixed||(u.viewport=u.getViewport(u.win[0])),u.viewport&&(u.body=u.viewport,0==/relative|absolute/.test(u.viewport.css("position"))&&u.css(u.viewport,{position:"relative"})),k.css({position:x}),u.zoom&&u.zoom.css({position:x}),u.updateScrollBar(),u.body.append(k),u.zoom&&u.body.append(u.zoom),u.railh&&(s.css({position:x}),u.body.append(s))}w.isios&&u.css(u.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),w.isie&&u.opt.disableoutline&&u.win.attr("hideFocus","true"),w.iswebkit&&u.opt.disableoutline&&u.win.css({outline:"none"})}if(!1===u.opt.autohidemode?(u.autohidedom=!1,u.rail.css({opacity:u.opt.cursoropacitymax}),u.railh&&u.railh.css({opacity:u.opt.cursoropacitymax})):!0===u.opt.autohidemode?(u.autohidedom=h().add(u.rail),w.isie8&&(u.autohidedom=u.autohidedom.add(u.cursor)),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh)),u.railh&&w.isie8&&(u.autohidedom=u.autohidedom.add(u.cursorh))):"scroll"==u.opt.autohidemode?(u.autohidedom=h().add(u.rail),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh))):"cursor"==u.opt.autohidemode?(u.autohidedom=h().add(u.cursor),u.railh&&(u.autohidedom=u.autohidedom.add(u.cursorh))):"hidden"==u.opt.autohidemode&&(u.autohidedom=!1,u.hide(),u.locked=!1),w.isie9mobile){u.scrollmom=new t(u),u.onmangotouch=function(a){var b=u.getScrollTop(),c=u.getScrollLeft();if(b==u.scrollmom.lastscrolly&&c==u.scrollmom.lastscrollx)return!0;var d=b-u.mangotouch.sy,e=c-u.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(e,2)+Math.pow(d,2)))){var f=d<0?-1:1,g=e<0?-1:1,h=+new Date;if(u.mangotouch.lazy&&clearTimeout(u.mangotouch.lazy),h-u.mangotouch.tm>80||u.mangotouch.dry!=f||u.mangotouch.drx!=g)u.scrollmom.stop(),u.scrollmom.reset(c,b),u.mangotouch.sy=b,u.mangotouch.ly=b,u.mangotouch.sx=c,u.mangotouch.lx=c,u.mangotouch.dry=f,u.mangotouch.drx=g,u.mangotouch.tm=h;else{u.scrollmom.stop(),u.scrollmom.update(u.mangotouch.sx-e,u.mangotouch.sy-d),u.mangotouch.tm,u.mangotouch.tm=h;var i=Math.max(Math.abs(u.mangotouch.ly-b),Math.abs(u.mangotouch.lx-c));u.mangotouch.ly=b,u.mangotouch.lx=c,i>2&&(u.mangotouch.lazy=setTimeout(function(){u.mangotouch.lazy=!1,u.mangotouch.dry=0,u.mangotouch.drx=0,u.mangotouch.tm=0,u.scrollmom.doMomentum(30)},100))}}};var y=u.getScrollTop(),z=u.getScrollLeft();u.mangotouch={sy:y,ly:y,dry:0,sx:z,lx:z,drx:0,lazy:!1,tm:0},u.bind(u.docscroll,"scroll",u.onmangotouch)}else{if(w.cantouch||u.istouchcapable||u.opt.touchbehavior||w.hasmstouch){u.scrollmom=new t(u),u.ontouchstart=function(a){if(a.pointerType&&2!=a.pointerType)return!1;if(!u.locked){if(w.hasmstouch)for(var b=!!a.target&&a.target;b;){var c=h(b).getNiceScroll();if(c.length>0&&c[0].me==u.me)break;if(c.length>0)return!1;if("DIV"==b.nodeName&&b.id==u.id)break;b=!!b.parentNode&&b.parentNode}u.cancelScroll();var b=u.getTarget(a);if(b){if(/INPUT/i.test(b.nodeName)&&/range/i.test(b.type))return u.stopPropagation(a)}if(!("clientX"in a)&&"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),u.forcescreen){var d=a,a={original:a.original?a.original:a};a.clientX=d.screenX,a.clientY=d.screenY}if(u.rail.drag={x:a.clientX,y:a.clientY,sx:u.scroll.x,sy:u.scroll.y,st:u.getScrollTop(),sl:u.getScrollLeft(),pt:2,dl:!1},u.ispage||!u.opt.directionlockdeadzone)u.rail.drag.dl="f";else{var e={w:h(window).width(),h:h(window).height()},f={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},g=Math.max(0,f.h-e.h),i=Math.max(0,f.w-e.w);!u.rail.scrollable&&u.railh.scrollable?u.rail.drag.ck=g>0&&"v":u.rail.scrollable&&!u.railh.scrollable?u.rail.drag.ck=i>0&&"h":u.rail.drag.ck=!1,u.rail.drag.ck||(u.rail.drag.dl="f")}if(u.opt.touchbehavior&&u.isiframe&&w.isie){var j=u.win.position();u.rail.drag.x+=j.left,u.rail.drag.y+=j.top}if(u.hasmoving=!1,u.lastmouseup=!1,u.scrollmom.reset(a.clientX,a.clientY),!w.cantouch&&!this.istouchcapable&&!w.hasmstouch){if(!(!!b&&/INPUT|SELECT|TEXTAREA/i.test(b.nodeName)))return!u.ispage&&w.hasmousecapture&&b.setCapture(),u.opt.touchbehavior?u.cancelEvent(a):u.stopPropagation(a);/SUBMIT|CANCEL|BUTTON/i.test(h(b).attr("type"))&&(pc={tg:b,click:!1},u.preventclick=pc)}}},u.ontouchend=function(a){return(!a.pointerType||2==a.pointerType)&&(u.rail.drag&&2==u.rail.drag.pt&&(u.scrollmom.doMomentum(),u.rail.drag=!1,u.hasmoving&&(u.hasmoving=!1,u.lastmouseup=!0,u.hideCursor(),w.hasmousecapture&&document.releaseCapture(),!w.cantouch))?u.cancelEvent(a):void 0)};var A=u.opt.touchbehavior&&u.isiframe&&!w.hasmousecapture;u.ontouchmove=function(a,b){if(a.pointerType&&2!=a.pointerType)return!1;if(u.rail.drag&&2==u.rail.drag.pt){if(w.cantouch&&void 0===a.original)return!0;u.hasmoving=!0,u.preventclick&&!u.preventclick.click&&(u.preventclick.click=u.preventclick.tg.onclick||!1,u.preventclick.tg.onclick=u.onpreventclick);if(a=h.extend({original:a},a),"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),u.forcescreen){var c=a,a={original:a.original?a.original:a};a.clientX=c.screenX,a.clientY=c.screenY}var d=ofy=0;if(A&&!b){var e=u.win.position();d=-e.left,ofy=-e.top}var f=a.clientY+ofy,g=f-u.rail.drag.y,i=a.clientX+d,j=i-u.rail.drag.x,k=u.rail.drag.st-g;if(u.ishwscroll&&u.opt.bouncescroll?k<0?k=Math.round(k/2):k>u.page.maxh&&(k=u.page.maxh+Math.round((k-u.page.maxh)/2)):(k<0&&(k=0,f=0),k>u.page.maxh&&(k=u.page.maxh,f=0)),u.railh&&u.railh.scrollable){var l=u.rail.drag.sl-j;u.ishwscroll&&u.opt.bouncescroll?l<0?l=Math.round(l/2):l>u.page.maxw&&(l=u.page.maxw+Math.round((l-u.page.maxw)/2)):(l<0&&(l=0,i=0),l>u.page.maxw&&(l=u.page.maxw,i=0))}var m=!1;if(u.rail.drag.dl)m=!0,"v"==u.rail.drag.dl?l=u.rail.drag.sl:"h"==u.rail.drag.dl&&(k=u.rail.drag.st);else{var n=Math.abs(g),o=Math.abs(j),p=u.opt.directionlockdeadzone;if("v"==u.rail.drag.ck){if(n>p&&o<=.3*n)return u.rail.drag=!1,!0;o>p&&(u.rail.drag.dl="f",h("body").scrollTop(h("body").scrollTop()))}else if("h"==u.rail.drag.ck){if(o>p&&n<=.3*o)return u.rail.drag=!1,!0;n>p&&(u.rail.drag.dl="f",h("body").scrollLeft(h("body").scrollLeft()))}}if(u.synched("touchmove",function(){u.rail.drag&&2==u.rail.drag.pt&&(u.prepareTransition&&u.prepareTransition(0),u.rail.scrollable&&u.setScrollTop(k),u.scrollmom.update(i,f),u.railh&&u.railh.scrollable?(u.setScrollLeft(l),u.showCursor(k,l)):u.showCursor(k),w.isie10&&document.selection.clear())}),w.ischrome&&u.istouchcapable&&(m=!1),m)return u.cancelEvent(a)}}}u.onmousedown=function(a,b){if(!u.rail.drag||1==u.rail.drag.pt){if(u.locked)return u.cancelEvent(a);u.cancelScroll(),u.rail.drag={x:a.clientX,y:a.clientY,sx:u.scroll.x,sy:u.scroll.y,pt:1,hr:!!b};var c=u.getTarget(a);return!u.ispage&&w.hasmousecapture&&c.setCapture(),u.isiframe&&!w.hasmousecapture&&(u.saved.csspointerevents=u.doc.css("pointer-events"),u.css(u.doc,{"pointer-events":"none"})),u.cancelEvent(a)}},u.onmouseup=function(a){if(u.rail.drag){if(w.hasmousecapture&&document.releaseCapture(),u.isiframe&&!w.hasmousecapture&&u.doc.css("pointer-events",u.saved.csspointerevents),1!=u.rail.drag.pt)return;return u.rail.drag=!1,u.cancelEvent(a)}},u.onmousemove=function(a){if(u.rail.drag){if(1!=u.rail.drag.pt)return;if(w.ischrome&&0==a.which)return u.onmouseup(a);if(u.cursorfreezed=!0,u.rail.drag.hr){u.scroll.x=u.rail.drag.sx+(a.clientX-u.rail.drag.x),u.scroll.x<0&&(u.scroll.x=0);var b=u.scrollvaluemaxw;u.scroll.x>b&&(u.scroll.x=b)}else{u.scroll.y=u.rail.drag.sy+(a.clientY-u.rail.drag.y),u.scroll.y<0&&(u.scroll.y=0);var c=u.scrollvaluemax;u.scroll.y>c&&(u.scroll.y=c)}return u.synched("mousemove",function(){u.rail.drag&&1==u.rail.drag.pt&&(u.showCursor(),u.rail.drag.hr?u.doScrollLeft(Math.round(u.scroll.x*u.scrollratio.x),u.opt.cursordragspeed):u.doScrollTop(Math.round(u.scroll.y*u.scrollratio.y),u.opt.cursordragspeed))}),u.cancelEvent(a)}},w.cantouch||u.opt.touchbehavior?(u.onpreventclick=function(a){if(u.preventclick)return u.preventclick.tg.onclick=u.preventclick.click,u.preventclick=!1,u.cancelEvent(a)},u.bind(u.win,"mousedown",u.ontouchstart),u.onclick=!w.isios&&function(a){return!u.lastmouseup||(u.lastmouseup=!1,u.cancelEvent(a))},u.opt.grabcursorenabled&&w.cursorgrabvalue&&(u.css(u.ispage?u.doc:u.win,{cursor:w.cursorgrabvalue}),u.css(u.rail,{cursor:w.cursorgrabvalue}))):("getSelection"in document?u.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?u.hasTextSelected=function(){return"None"!=document.selection.type}:u.hasTextSelected=function(){return!1},u.onselectionstart=function(a){u.ispage||(u.selectiondrag=u.win.offset())},u.onselectionend=function(a){u.selectiondrag=!1},u.onselectiondrag=function(b){u.selectiondrag&&u.hasTextSelected()&&u.debounced("selectionscroll",function(){a(b)},250)}),w.hasmstouch&&(u.css(u.rail,{"-ms-touch-action":"none"}),u.css(u.cursor,{"-ms-touch-action":"none"}),u.bind(u.win,"MSPointerDown",u.ontouchstart),u.bind(document,"MSPointerUp",u.ontouchend),u.bind(document,"MSPointerMove",u.ontouchmove),u.bind(u.cursor,"MSGestureHold",function(a){a.preventDefault()}),u.bind(u.cursor,"contextmenu",function(a){a.preventDefault()})),this.istouchcapable&&(u.bind(u.win,"touchstart",u.ontouchstart),u.bind(document,"touchend",u.ontouchend),u.bind(document,"touchcancel",u.ontouchend),u.bind(document,"touchmove",u.ontouchmove)),u.bind(u.cursor,"mousedown",u.onmousedown),u.bind(u.cursor,"mouseup",u.onmouseup),u.railh&&(u.bind(u.cursorh,"mousedown",function(a){u.onmousedown(a,!0)}),u.bind(u.cursorh,"mouseup",function(a){if(!u.rail.drag||2!=u.rail.drag.pt)return u.rail.drag=!1,u.hasmoving=!1,u.hideCursor(),w.hasmousecapture&&document.releaseCapture(),u.cancelEvent(a)})),(u.opt.cursordragontouch||!w.cantouch&&!u.opt.touchbehavior)&&(u.rail.css({cursor:"default"}),u.railh&&u.railh.css({cursor:"default"}),u.jqbind(u.rail,"mouseenter",function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.jqbind(u.rail,"mouseleave",function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}),u.opt.sensitiverail&&(u.bind(u.rail,"click",function(a){u.doRailClick(a,!1,!1)}),u.bind(u.rail,"dblclick",function(a){u.doRailClick(a,!0,!1)}),u.bind(u.cursor,"click",function(a){u.cancelEvent(a)}),u.bind(u.cursor,"dblclick",function(a){u.cancelEvent(a)})),u.railh&&(u.jqbind(u.railh,"mouseenter",function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.jqbind(u.railh,"mouseleave",function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}),u.opt.sensitiverail&&(u.bind(u.railh,"click",function(a){u.doRailClick(a,!1,!0)}),u.bind(u.railh,"dblclick",function(a){u.doRailClick(a,!0,!0)}),u.bind(u.cursorh,"click",function(a){u.cancelEvent(a)}),u.bind(u.cursorh,"dblclick",function(a){u.cancelEvent(a)})))),w.cantouch||u.opt.touchbehavior?(u.bind(w.hasmousecapture?u.win:document,"mouseup",u.ontouchend),u.bind(document,"mousemove",u.ontouchmove),u.onclick&&u.bind(document,"click",u.onclick),u.opt.cursordragontouch&&(u.bind(u.cursor,"mousedown",u.onmousedown),u.bind(u.cursor,"mousemove",u.onmousemove),u.cursorh&&u.bind(u.cursorh,"mousedown",u.onmousedown),u.cursorh&&u.bind(u.cursorh,"mousemove",u.onmousemove))):(u.bind(w.hasmousecapture?u.win:document,"mouseup",u.onmouseup),u.bind(document,"mousemove",u.onmousemove),u.onclick&&u.bind(document,"click",u.onclick),!u.ispage&&u.opt.enablescrollonselection&&(u.bind(u.win[0],"mousedown",u.onselectionstart),u.bind(document,"mouseup",u.onselectionend),u.bind(u.cursor,"mouseup",u.onselectionend),u.cursorh&&u.bind(u.cursorh,"mouseup",u.onselectionend),u.bind(document,"mousemove",u.onselectiondrag)),u.zoom&&(u.jqbind(u.zoom,"mouseenter",function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.jqbind(u.zoom,"mouseleave",function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}))),u.opt.enablemousewheel&&(u.isiframe||u.bind(w.isie&&u.ispage?document:u.win,"mousewheel",u.onmousewheel),u.bind(u.rail,"mousewheel",u.onmousewheel),u.railh&&u.bind(u.railh,"mousewheel",u.onmousewheelhr)),u.ispage||w.cantouch||/HTML|BODY/.test(u.win[0].nodeName)||(u.win.attr("tabindex")||u.win.attr({tabindex:e++}),u.jqbind(u.win,"focus",function(a){c=u.getTarget(a).id||!0,u.hasfocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.jqbind(u.win,"blur",function(a){c=!1,u.hasfocus=!1}),u.jqbind(u.win,"mouseenter",function(a){d=u.getTarget(a).id||!0,u.hasmousefocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.jqbind(u.win,"mouseleave",function(){d=!1,u.hasmousefocus=!1}))}if(u.onkeypress=function(a){if(u.locked&&0==u.page.maxh)return!0;a=a||window.e;var b=u.getTarget(a);if(b&&/INPUT|TEXTAREA|SELECT|OPTION/.test(b.nodeName)){if(!(b.getAttribute("type")||b.type||!1)||!/submit|button|cancel/i.tp)return!0}if(u.hasfocus||u.hasmousefocus&&!c||u.ispage&&!c&&!d){
var e=a.keyCode;if(u.locked&&27!=e)return u.cancelEvent(a);var f=a.ctrlKey||!1,g=a.shiftKey||!1,h=!1;switch(e){case 38:case 63233:u.doScrollBy(72),h=!0;break;case 40:case 63235:u.doScrollBy(-72),h=!0;break;case 37:case 63232:u.railh&&(f?u.doScrollLeft(0):u.doScrollLeftBy(72),h=!0);break;case 39:case 63234:u.railh&&(f?u.doScrollLeft(u.page.maxw):u.doScrollLeftBy(-72),h=!0);break;case 33:case 63276:u.doScrollBy(u.view.h),h=!0;break;case 34:case 63277:u.doScrollBy(-u.view.h),h=!0;break;case 36:case 63273:u.railh&&f?u.doScrollPos(0,0):u.doScrollTo(0),h=!0;break;case 35:case 63275:u.railh&&f?u.doScrollPos(u.page.maxw,u.page.maxh):u.doScrollTo(u.page.maxh),h=!0;break;case 32:u.opt.spacebarenabled&&(g?u.doScrollBy(u.view.h):u.doScrollBy(-u.view.h),h=!0);break;case 27:u.zoomactive&&(u.doZoom(),h=!0)}if(h)return u.cancelEvent(a)}},u.opt.enablekeyboard&&u.bind(document,w.isopera&&!w.isopera12?"keypress":"keydown",u.onkeypress),u.bind(window,"resize",u.lazyResize),u.bind(window,"orientationchange",u.lazyResize),u.bind(window,"load",u.lazyResize),w.ischrome&&!u.ispage&&!u.haswrapper){var B=u.win.attr("style"),C=parseFloat(u.win.css("width"))+1;u.win.css("width",C),u.synched("chromefix",function(){u.win.attr("style",B)})}u.onAttributeChange=function(a){u.lazyResize(250)},u.ispage||u.haswrapper||(!1!==o?(u.observer=new o(function(a){a.forEach(u.onAttributeChange)}),u.observer.observe(u.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),u.observerremover=new o(function(a){a.forEach(function(a){if(a.removedNodes.length>0)for(var b in a.removedNodes)if(a.removedNodes[b]==u.win[0])return u.remove()})}),u.observerremover.observe(u.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(u.bind(u.win,w.isie&&!w.isie9?"propertychange":"DOMAttrModified",u.onAttributeChange),w.isie9&&u.win[0].attachEvent("onpropertychange",u.onAttributeChange),u.bind(u.win,"DOMNodeRemoved",function(a){a.target==u.win[0]&&u.remove()}))),!u.ispage&&u.opt.boxzoom&&u.bind(window,"resize",u.resizeZoom),u.istextarea&&u.bind(u.win,"mouseup",u.lazyResize),u.checkrtlmode=!0,u.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){b.call(u.doc[0],!1)},500),u.bind(this.doc,"load",b))},this.showCursor=function(a,b){u.cursortimeout&&(clearTimeout(u.cursortimeout),u.cursortimeout=0),u.rail&&(u.autohidedom&&(u.autohidedom.stop().css({opacity:u.opt.cursoropacitymax}),u.cursoractive=!0),u.rail.drag&&1==u.rail.drag.pt||(void 0!==a&&!1!==a&&(u.scroll.y=Math.round(1*a/u.scrollratio.y)),void 0!==b&&(u.scroll.x=Math.round(1*b/u.scrollratio.x))),u.cursor.css({height:u.cursorheight,top:u.scroll.y}),u.cursorh&&(!u.rail.align&&u.rail.visibility?u.cursorh.css({width:u.cursorwidth,left:u.scroll.x+u.rail.width}):u.cursorh.css({width:u.cursorwidth,left:u.scroll.x}),u.cursoractive=!0),u.zoom&&u.zoom.stop().css({opacity:u.opt.cursoropacitymax}))},this.hideCursor=function(a){u.cursortimeout||u.rail&&u.autohidedom&&(u.cursortimeout=setTimeout(function(){u.rail.active&&u.showonmouseevent||(u.autohidedom.stop().animate({opacity:u.opt.cursoropacitymin}),u.zoom&&u.zoom.stop().animate({opacity:u.opt.cursoropacitymin}),u.cursoractive=!1),u.cursortimeout=0},a||u.opt.hidecursordelay))},this.noticeCursor=function(a,b,c){u.showCursor(b,c),u.rail.active||u.hideCursor(a)},this.getContentSize=u.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:u.haswrapper?function(){return{w:u.doc.outerWidth()+parseInt(u.win.css("paddingLeft"))+parseInt(u.win.css("paddingRight")),h:u.doc.outerHeight()+parseInt(u.win.css("paddingTop"))+parseInt(u.win.css("paddingBottom"))}}:function(){return{w:u.docscroll[0].scrollWidth,h:u.docscroll[0].scrollHeight}},this.onResize=function(a,b){if(!u.win)return!1;if(!u.haswrapper&&!u.ispage){if("none"==u.win.css("display"))return u.visibility&&u.hideRail().hideRailHr(),!1;u.hidden||u.visibility||u.showRail().showRailHr()}var c=u.page.maxh,d=u.page.maxw,e={h:u.view.h,w:u.view.w};if(u.view={w:u.ispage?u.win.width():parseInt(u.win[0].clientWidth),h:u.ispage?u.win.height():parseInt(u.win[0].clientHeight)},u.page=b||u.getContentSize(),u.page.maxh=Math.max(0,u.page.h-u.view.h),u.page.maxw=Math.max(0,u.page.w-u.view.w),u.page.maxh==c&&u.page.maxw==d&&u.view.w==e.w){if(u.ispage)return u;var f=u.win.offset();if(u.lastposition){var g=u.lastposition;if(g.top==f.top&&g.left==f.left)return u}u.lastposition=f}return 0==u.page.maxh?(u.hideRail(),u.scrollvaluemax=0,u.scroll.y=0,u.scrollratio.y=0,u.cursorheight=0,u.setScrollTop(0),u.rail.scrollable=!1):u.rail.scrollable=!0,0==u.page.maxw?(u.hideRailHr(),u.scrollvaluemaxw=0,u.scroll.x=0,u.scrollratio.x=0,u.cursorwidth=0,u.setScrollLeft(0),u.railh.scrollable=!1):u.railh.scrollable=!0,u.locked=0==u.page.maxh&&0==u.page.maxw,u.locked?(u.ispage||u.updateScrollBar(u.view),!1):(u.hidden||u.visibility?u.hidden||u.railh.visibility||u.showRailHr():u.showRail().showRailHr(),u.istextarea&&u.win.css("resize")&&"none"!=u.win.css("resize")&&(u.view.h-=20),u.cursorheight=Math.min(u.view.h,Math.round(u.view.h*(u.view.h/u.page.h))),u.cursorheight=u.opt.cursorfixedheight?u.opt.cursorfixedheight:Math.max(u.opt.cursorminheight,u.cursorheight),u.cursorwidth=Math.min(u.view.w,Math.round(u.view.w*(u.view.w/u.page.w))),u.cursorwidth=u.opt.cursorfixedheight?u.opt.cursorfixedheight:Math.max(u.opt.cursorminheight,u.cursorwidth),u.scrollvaluemax=u.view.h-u.cursorheight-u.cursor.hborder,u.railh&&(u.railh.width=u.page.maxh>0?u.view.w-u.rail.width:u.view.w,u.scrollvaluemaxw=u.railh.width-u.cursorwidth-u.cursorh.wborder),u.checkrtlmode&&u.railh&&(u.checkrtlmode=!1,u.opt.rtlmode&&0==u.scroll.x&&u.setScrollLeft(u.page.maxw)),u.ispage||u.updateScrollBar(u.view),u.scrollratio={x:u.page.maxw/u.scrollvaluemaxw,y:u.page.maxh/u.scrollvaluemax},u.getScrollTop()>u.page.maxh?u.doScrollTop(u.page.maxh):(u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x)),u.cursoractive&&u.noticeCursor()),u.scroll.y&&0==u.getScrollTop()&&u.doScrollTo(Math.floor(u.scroll.y*u.scrollratio.y)),u)},this.resize=u.onResize,this.lazyResize=function(a){return a=isNaN(a)?30:a,u.delayed("resize",u.resize,a),u},this._bind=function(a,b,c,d){u.events.push({e:a,n:b,f:c,b:d,q:!1}),a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},this.jqbind=function(a,b,c){u.events.push({e:a,n:b,f:c,q:!0}),h(a).bind(b,c)},this.bind=function(a,b,c,d){var e="jquery"in a?a[0]:a;if(void 0==e&&(e=a),"mousewheel"==b)if("onwheel"in u.win)u._bind(e,"wheel",c,d||!1);else{var f=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";q(e,f,c,d||!1),"DOMMouseScroll"==f&&q(e,"MozMousePixelScroll",c,d||!1)}else if(e.addEventListener){if(w.cantouch&&/mouseup|mousedown|mousemove/.test(b)){var g="mousedown"==b?"touchstart":"mouseup"==b?"touchend":"touchmove";u._bind(e,g,function(a){if(a.touches){if(a.touches.length<2){var b=a.touches.length?a.touches[0]:a;b.original=a,c.call(this,b)}}else if(a.changedTouches){var b=a.changedTouches[0];b.original=a,c.call(this,b)}},d||!1)}u._bind(e,b,c,d||!1),w.cantouch&&"mouseup"==b&&u._bind(e,"touchcancel",c,d||!1)}else u._bind(e,b,function(a){return a=a||window.event||!1,a&&a.srcElement&&(a.target=a.srcElement),"pageY"in a||(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),!1!==c.call(e,a)&&!1!==d||u.cancelEvent(a)})},this._unbind=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=!1},this.unbindAll=function(){for(var a=0;a<u.events.length;a++){var b=u.events[a];b.q?b.e.unbind(b.n,b.f):u._unbind(b.e,b.n,b.f,b.b)}},this.cancelEvent=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.preventManipulation&&a.preventManipulation(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1)},this.stopPropagation=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.stopPropagation?a.stopPropagation():(a.cancelBubble&&(a.cancelBubble=!0),!1))},this.showRail=function(){return 0==u.page.maxh||!u.ispage&&"none"==u.win.css("display")||(u.visibility=!0,u.rail.visibility=!0,u.rail.css("display","block")),u},this.showRailHr=function(){return u.railh?(0==u.page.maxw||!u.ispage&&"none"==u.win.css("display")||(u.railh.visibility=!0,u.railh.css("display","block")),u):u},this.hideRail=function(){return u.visibility=!1,u.rail.visibility=!1,u.rail.css("display","none"),u},this.hideRailHr=function(){return u.railh?(u.railh.visibility=!1,u.railh.css("display","none"),u):u},this.show=function(){return u.hidden=!1,u.locked=!1,u.showRail().showRailHr()},this.hide=function(){return u.hidden=!0,u.locked=!0,u.hideRail().hideRailHr()},this.toggle=function(){return u.hidden?u.show():u.hide()},this.remove=function(){u.stop(),u.cursortimeout&&clearTimeout(u.cursortimeout),u.doZoomOut(),u.unbindAll(),w.isie9&&u.win[0].detachEvent("onpropertychange",u.onAttributeChange),!1!==u.observer&&u.observer.disconnect(),!1!==u.observerremover&&u.observerremover.disconnect(),u.events=null,u.cursor&&u.cursor.remove(),u.cursorh&&u.cursorh.remove(),u.rail&&u.rail.remove(),u.railh&&u.railh.remove(),u.zoom&&u.zoom.remove();for(var a=0;a<u.saved.css.length;a++){var b=u.saved.css[a];b[0].css(b[1],void 0===b[2]?"":b[2])}u.saved=!1,u.me.data("__nicescroll","");var c=h.nicescroll;c.each(function(a){if(this&&this.id===u.id){delete c[a];for(var b=++a;b<c.length;b++,a++)c[a]=c[b];c.length--,c.length&&delete c[c.length]}});for(var d in u)u[d]=null,delete u[d];u=null},this.scrollstart=function(a){return this.onscrollstart=a,u},this.scrollend=function(a){return this.onscrollend=a,u},this.scrollcancel=function(a){return this.onscrollcancel=a,u},this.zoomin=function(a){return this.onzoomin=a,u},this.zoomout=function(a){return this.onzoomout=a,u},this.isScrollable=function(a){var b=a.target?a.target:a;if("OPTION"==b.nodeName)return!0;for(;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=h(b);if(/scroll|auto/.test(c.css("overflowY")||c.css("overflowX")||c.css("overflow")||""))return b.clientHeight!=b.scrollHeight;b=!!b.parentNode&&b.parentNode}return!1},this.getViewport=function(a){for(var b=!(!a||!a.parentNode)&&a.parentNode;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=h(b);if(/scroll|auto/.test(c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"")&&b.clientHeight!=b.scrollHeight)return c;if(c.getNiceScroll().length>0)return c;b=!!b.parentNode&&b.parentNode}return!1},this.onmousewheel=function(a){if(u.locked)return u.debounced("checkunlock",u.resize,250),!0;if(u.rail.drag)return u.cancelEvent(a);if("auto"==u.opt.oneaxismousemode&&0!=a.deltaX&&(u.opt.oneaxismousemode=!1),u.opt.oneaxismousemode&&0==a.deltaX&&!u.rail.scrollable)return!u.railh||!u.railh.scrollable||u.onmousewheelhr(a);var b=+new Date,c=!1;if(u.opt.preservenativescrolling&&u.checkarea+600<b&&(u.nativescrollingarea=u.isScrollable(a),c=!0),u.checkarea=b,u.nativescrollingarea)return!0;var d=s(a,!1,c);return d&&(u.checkarea=0),d},this.onmousewheelhr=function(a){if(u.locked||!u.railh.scrollable)return!0;if(u.rail.drag)return u.cancelEvent(a);var b=+new Date,c=!1;return u.opt.preservenativescrolling&&u.checkarea+600<b&&(u.nativescrollingarea=u.isScrollable(a),c=!0),u.checkarea=b,!!u.nativescrollingarea||(u.locked?u.cancelEvent(a):s(a,!0,c))},this.stop=function(){return u.cancelScroll(),u.scrollmon&&u.scrollmon.stop(),u.cursorfreezed=!1,u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.noticeCursor(),u},this.getTransitionSpeed=function(a){var b=Math.round(10*u.opt.scrollspeed),c=Math.min(b,Math.round(a/20*u.opt.scrollspeed));return c>20?c:0},u.opt.smoothscroll?u.ishwscroll&&w.hastransition&&u.opt.usetransition?(this.prepareTransition=function(a,b){var c=b?a>20?a:0:u.getTransitionSpeed(a),d=c?w.prefixstyle+"transform "+c+"ms ease-out":"";return u.lasttransitionstyle&&u.lasttransitionstyle==d||(u.lasttransitionstyle=d,u.doc.css(w.transitionstyle,d)),c},this.doScrollLeft=function(a,b){var c=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=u.getScrollTop(),e=u.getScrollLeft();return((u.newscrolly-d)*(b-d)<0||(u.newscrollx-e)*(a-e)<0)&&u.cancelScroll(),0==u.opt.bouncescroll&&(b<0?b=0:b>u.page.maxh&&(b=u.page.maxh),a<0?a=0:a>u.page.maxw&&(a=u.page.maxw)),(!u.scrollrunning||a!=u.newscrollx||b!=u.newscrolly)&&(u.newscrolly=b,u.newscrollx=a,u.newscrollspeed=c||!1,!u.timer&&void(u.timer=setTimeout(function(){var c=u.getScrollTop(),d=u.getScrollLeft(),e={};e.x=a-d,e.y=b-c,e.px=d,e.py=c;var f=Math.round(Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))),g=u.newscrollspeed&&u.newscrollspeed>1?u.newscrollspeed:u.getTransitionSpeed(f);if(u.newscrollspeed&&u.newscrollspeed<=1&&(g*=u.newscrollspeed),u.prepareTransition(g,!0),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),g>0){if(!u.scrollrunning&&u.onscrollstart){var h={type:"scrollstart",current:{x:d,y:c},request:{x:a,y:b},end:{x:u.newscrollx,y:u.newscrolly},speed:g};u.onscrollstart.call(u,h)}w.transitionend?u.scrollendtrapped||(u.scrollendtrapped=!0,u.bind(u.doc,w.transitionend,u.onScrollEnd,!1)):(u.scrollendtrapped&&clearTimeout(u.scrollendtrapped),u.scrollendtrapped=setTimeout(u.onScrollEnd,g));var i=c,j=d;u.timerscroll={bz:new BezierClass(i,u.newscrolly,g,0,0,.58,1),bh:new BezierClass(j,u.newscrollx,g,0,0,.58,1)},u.cursorfreezed||(u.timerscroll.tm=setInterval(function(){u.showCursor(u.getScrollTop(),u.getScrollLeft())},60))}u.synched("doScroll-set",function(){u.timer=0,u.scrollendtrapped&&(u.scrollrunning=!0),u.setScrollTop(u.newscrolly),u.setScrollLeft(u.newscrollx),u.scrollendtrapped||u.onScrollEnd()})},50)))},this.cancelScroll=function(){if(!u.scrollendtrapped)return!0;var a=u.getScrollTop(),b=u.getScrollLeft();return u.scrollrunning=!1,w.transitionend||clearTimeout(w.transitionend),u.scrollendtrapped=!1,u._unbind(u.doc,w.transitionend,u.onScrollEnd),u.prepareTransition(0),u.setScrollTop(a),u.railh&&u.setScrollLeft(b),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1,u.cursorfreezed=!1,u.showCursor(a,b),u},this.onScrollEnd=function(){u.scrollendtrapped&&u._unbind(u.doc,w.transitionend,u.onScrollEnd),u.scrollendtrapped=!1,u.prepareTransition(0),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1;var a=u.getScrollTop(),b=u.getScrollLeft();if(u.setScrollTop(a),u.railh&&u.setScrollLeft(b),u.noticeCursor(!1,a,b),u.cursorfreezed=!1,a<0?a=0:a>u.page.maxh&&(a=u.page.maxh),b<0?b=0:b>u.page.maxw&&(b=u.page.maxw),a!=u.newscrolly||b!=u.newscrollx)return u.doScrollPos(b,a,u.opt.snapbackspeed);if(u.onscrollend&&u.scrollrunning){var c={type:"scrollend",current:{x:b,y:a},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,c)}u.scrollrunning=!1}):(this.doScrollLeft=function(a,b){var c=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){function d(){if(u.cancelAnimationFrame)return!0;if(u.scrollrunning=!0,m=1-m)return u.timer=k(d)||1;var a=0,b=sy=u.getScrollTop();if(u.dst.ay){b=u.bzscroll?u.dst.py+u.bzscroll.getNow()*u.dst.ay:u.newscrolly;var c=b-sy;(c<0&&b<u.newscrolly||c>0&&b>u.newscrolly)&&(b=u.newscrolly),u.setScrollTop(b),b==u.newscrolly&&(a=1)}else a=1;var e=sx=u.getScrollLeft();if(u.dst.ax){e=u.bzscroll?u.dst.px+u.bzscroll.getNow()*u.dst.ax:u.newscrollx;var c=e-sx;(c<0&&e<u.newscrollx||c>0&&e>u.newscrollx)&&(e=u.newscrollx),u.setScrollLeft(e),e==u.newscrollx&&(a+=1)}else a+=1;if(2==a){if(u.timer=0,u.cursorfreezed=!1,u.bzscroll=!1,u.scrollrunning=!1,b<0?b=0:b>u.page.maxh&&(b=u.page.maxh),e<0?e=0:e>u.page.maxw&&(e=u.page.maxw),e!=u.newscrollx||b!=u.newscrolly)u.doScrollPos(e,b);else if(u.onscrollend){var f={type:"scrollend",current:{x:sx,y:sy},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,f)}}else u.timer=k(d)||1}var b=void 0===b||!1===b?u.getScrollTop(!0):b;if(u.timer&&u.newscrolly==b&&u.newscrollx==a)return!0;u.timer&&l(u.timer),u.timer=0;var e=u.getScrollTop(),f=u.getScrollLeft();((u.newscrolly-e)*(b-e)<0||(u.newscrollx-f)*(a-f)<0)&&u.cancelScroll(),u.newscrolly=b,u.newscrollx=a,u.bouncescroll&&u.rail.visibility||(u.newscrolly<0?u.newscrolly=0:u.newscrolly>u.page.maxh&&(u.newscrolly=u.page.maxh)),u.bouncescroll&&u.railh.visibility||(u.newscrollx<0?u.newscrollx=0:u.newscrollx>u.page.maxw&&(u.newscrollx=u.page.maxw)),u.dst={},u.dst.x=a-f,u.dst.y=b-e,u.dst.px=f,u.dst.py=e;var g=Math.round(Math.sqrt(Math.pow(u.dst.x,2)+Math.pow(u.dst.y,2)));u.dst.ax=u.dst.x/g,u.dst.ay=u.dst.y/g;var h=0,i=g;0==u.dst.x?(h=e,i=b,u.dst.ay=1,u.dst.py=0):0==u.dst.y&&(h=f,i=a,u.dst.ax=1,u.dst.px=0);var j=u.getTransitionSpeed(g);if(c&&c<=1&&(j*=c),u.bzscroll=j>0&&(u.bzscroll?u.bzscroll.update(i,j):new BezierClass(h,i,j,0,1,0,1)),!u.timer){(e==u.page.maxh&&b>=u.page.maxh||f==u.page.maxw&&a>=u.page.maxw)&&u.checkContentSize();var m=1;if(u.cancelAnimationFrame=!1,u.timer=1,u.onscrollstart&&!u.scrollrunning){var n={type:"scrollstart",current:{x:f,y:e},request:{x:a,y:b},end:{x:u.newscrollx,y:u.newscrolly},speed:j};u.onscrollstart.call(u,n)}d(),(e==u.page.maxh&&b>=e||f==u.page.maxw&&a>=f)&&u.checkContentSize(),u.noticeCursor()}},this.cancelScroll=function(){return u.timer&&l(u.timer),u.timer=0,u.bzscroll=!1,u.scrollrunning=!1,u}):(this.doScrollLeft=function(a,b){var c=u.getScrollTop();u.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=u.getScrollLeft();u.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=a>u.page.maxw?u.page.maxw:a;d<0&&(d=0);var e=b>u.page.maxh?u.page.maxh:b;e<0&&(e=0),u.synched("scroll",function(){u.setScrollTop(e),u.setScrollLeft(d)})},this.cancelScroll=function(){}),this.doScrollBy=function(a,b){var c=0;if(b)c=Math.floor((u.scroll.y-a)*u.scrollratio.y);else{c=(u.timer?u.newscrolly:u.getScrollTop(!0))-a}if(u.bouncescroll){var d=Math.round(u.view.h/2);c<-d?c=-d:c>u.page.maxh+d&&(c=u.page.maxh+d)}return u.cursorfreezed=!1,py=u.getScrollTop(!0),c<0&&py<=0?u.noticeCursor():c>u.page.maxh&&py>=u.page.maxh?(u.checkContentSize(),u.noticeCursor()):void u.doScrollTop(c)},this.doScrollLeftBy=function(a,b){var c=0;if(b)c=Math.floor((u.scroll.x-a)*u.scrollratio.x);else{c=(u.timer?u.newscrollx:u.getScrollLeft(!0))-a}if(u.bouncescroll){var d=Math.round(u.view.w/2);c<-d?c=-d:c>u.page.maxw+d&&(c=u.page.maxw+d)}return u.cursorfreezed=!1,px=u.getScrollLeft(!0),c<0&&px<=0?u.noticeCursor():c>u.page.maxw&&px>=u.page.maxw?u.noticeCursor():void u.doScrollLeft(c)},this.doScrollTo=function(a,b){var c=b?Math.round(a*u.scrollratio.y):a;c<0?c=0:c>u.page.maxh&&(c=u.page.maxh),u.cursorfreezed=!1,u.doScrollTop(a)},this.checkContentSize=function(){var a=u.getContentSize();a.h==u.page.h&&a.w==u.page.w||u.resize(!1,a)},u.onscroll=function(a){u.rail.drag||u.cursorfreezed||u.synched("scroll",function(){u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.railh&&(u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x))),u.noticeCursor()})},u.bind(u.docscroll,"scroll",u.onscroll),this.doZoomIn=function(a){if(!u.zoomactive){u.zoomactive=!0,u.zoomrestore={style:{}};var b=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],c=u.win[0].style;for(var d in b){var e=b[d];u.zoomrestore.style[e]=void 0!==c[e]?c[e]:""}u.zoomrestore.style.width=u.win.css("width"),u.zoomrestore.style.height=u.win.css("height"),u.zoomrestore.padding={w:u.win.outerWidth()-u.win.width(),h:u.win.outerHeight()-u.win.height()},w.isios4&&(u.zoomrestore.scrollTop=h(window).scrollTop(),h(window).scrollTop(0)),u.win.css({position:w.isios4?"absolute":"fixed",top:0,left:0,"z-index":g+100,margin:"0px"});var f=u.win.css("backgroundColor");return(""==f||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(f))&&u.win.css("backgroundColor","#fff"),u.rail.css({"z-index":g+101}),u.zoom.css({"z-index":g+102}),u.zoom.css("backgroundPosition","0px -18px"),u.resizeZoom(),u.onzoomin&&u.onzoomin.call(u),u.cancelEvent(a)}},this.doZoomOut=function(a){if(u.zoomactive)return u.zoomactive=!1,u.win.css("margin",""),u.win.css(u.zoomrestore.style),w.isios4&&h(window).scrollTop(u.zoomrestore.scrollTop),u.rail.css({"z-index":u.zindex}),u.zoom.css({"z-index":u.zindex}),u.zoomrestore=!1,u.zoom.css("backgroundPosition","0px 0px"),u.onResize(),u.onzoomout&&u.onzoomout.call(u),u.cancelEvent(a)},this.doZoom=function(a){return u.zoomactive?u.doZoomOut(a):u.doZoomIn(a)},this.resizeZoom=function(){if(u.zoomactive){var a=u.getScrollTop();u.win.css({width:h(window).width()-u.zoomrestore.padding.w+"px",height:h(window).height()-u.zoomrestore.padding.h+"px"}),u.onResize(),u.setScrollTop(Math.min(u.page.maxh,a))}},this.init(),h.nicescroll.push(this)},t=function(a){var b=this;this.nc=a,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(a,c){b.stop();var d=b.time();b.steptime=0,b.lasttime=d,b.speedx=0,b.speedy=0,b.lastx=a,b.lasty=c,b.lastscrollx=-1,b.lastscrolly=-1},this.update=function(a,c){var d=b.time();b.steptime=d-b.lasttime,b.lasttime=d;var e=c-b.lasty,f=a-b.lastx,g=b.nc.getScrollTop(),h=b.nc.getScrollLeft(),i=g+e,j=h+f;b.snapx=j<0||j>b.nc.page.maxw,b.snapy=i<0||i>b.nc.page.maxh,b.speedx=f,b.speedy=e,b.lastx=a,b.lasty=c},this.stop=function(){b.nc.unsynched("domomentum2d"),b.timer&&clearTimeout(b.timer),b.timer=0,b.lastscrollx=-1,b.lastscrolly=-1},this.doSnapy=function(a,c){var d=!1;c<0?(c=0,d=!0):c>b.nc.page.maxh&&(c=b.nc.page.maxh,d=!0),a<0?(a=0,d=!0):a>b.nc.page.maxw&&(a=b.nc.page.maxw,d=!0),d&&b.nc.doScrollPos(a,c,b.nc.opt.snapbackspeed)},this.doMomentum=function(a){var c=b.time(),d=a?c+a:b.lasttime,e=b.nc.getScrollLeft(),f=b.nc.getScrollTop(),g=b.nc.page.maxh,h=b.nc.page.maxw;b.speedx=h>0?Math.min(60,b.speedx):0,b.speedy=g>0?Math.min(60,b.speedy):0;var i=d&&c-d<=60;(f<0||f>g||e<0||e>h)&&(i=!1);var j=!(!b.speedy||!i)&&b.speedy,k=!(!b.speedx||!i)&&b.speedx;if(j||k){var l=Math.max(16,b.steptime);if(l>50){var m=l/50;b.speedx*=m,b.speedy*=m,l=50}b.demulxy=0,b.lastscrollx=b.nc.getScrollLeft(),b.chkx=b.lastscrollx,b.lastscrolly=b.nc.getScrollTop(),b.chky=b.lastscrolly;var n=b.lastscrollx,o=b.lastscrolly,p=function(){var a=b.time()-c>600?.04:.02;b.speedx&&(n=Math.floor(b.lastscrollx-b.speedx*(1-b.demulxy)),b.lastscrollx=n,(n<0||n>h)&&(a=.1)),b.speedy&&(o=Math.floor(b.lastscrolly-b.speedy*(1-b.demulxy)),b.lastscrolly=o,(o<0||o>g)&&(a=.1)),b.demulxy=Math.min(1,b.demulxy+a),b.nc.synched("domomentum2d",function(){if(b.speedx){b.nc.getScrollLeft()!=b.chkx&&b.stop(),b.chkx=n,b.nc.setScrollLeft(n)}if(b.speedy){b.nc.getScrollTop()!=b.chky&&b.stop(),b.chky=o,b.nc.setScrollTop(o)}b.timer||(b.nc.hideCursor(),b.doSnapy(n,o))}),b.demulxy<1?b.timer=setTimeout(p,l):(b.stop(),b.nc.hideCursor(),b.doSnapy(n,o))};p()}else b.doSnapy(b.nc.getScrollLeft(),b.nc.getScrollTop())}},u=b.fn.scrollTop;b.cssHooks.pageYOffset={get:function(a,b,c){var d=h.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollTop():u.call(a)},set:function(a,b){var c=h.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollTop(parseInt(b)):u.call(a,b),this}},b.fn.scrollTop=function(a){if(void 0===a){var b=!!this[0]&&(h.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollTop():u.call(this)}return this.each(function(){var b=h.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollTop(parseInt(a)):u.call(h(this),a)})};var v=b.fn.scrollLeft;h.cssHooks.pageXOffset={get:function(a,b,c){var d=h.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollLeft():v.call(a)},set:function(a,b){var c=h.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollLeft(parseInt(b)):v.call(a,b),this}},b.fn.scrollLeft=function(a){if(void 0===a){var b=!!this[0]&&(h.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollLeft():v.call(this)}return this.each(function(){var b=h.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollLeft(parseInt(a)):v.call(h(this),a)})};var w=function(b){var c=this;if(this.length=0,this.name="nicescrollarray",this.each=function(a){for(var b=0,d=0;b<c.length;b++)a.call(c[b],d++);return c},this.push=function(a){c[c.length]=a,c.length++},this.eq=function(a){return c[a]},b)for(a=0;a<b.length;a++){var d=h.data(b[a],"__nicescroll")||!1;d&&(this[this.length]=d,this.length++)}return this};!function(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}(w.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(a,b){a[b]=function(){var a=arguments;return this.each(function(){this[b].apply(this,a)})}}),b.fn.getNiceScroll=function(a){return void 0===a?new w(this):this[a]&&h.data(this[a],"__nicescroll")||!1},b.extend(b.expr[":"],{nicescroll:function(a){return!!h.data(a,"__nicescroll")}}),h.fn.niceScroll=function(a,b){void 0===b&&("object"!=typeof a||"jquery"in a||(b=a,a=!1));var c=new w;void 0===b&&(b={}),a&&(b.doc=h(a),b.win=h(this));var d=!("doc"in b);return d||"win"in b||(b.win=h(this)),this.each(function(){var a=h(this).data("__nicescroll")||!1;a||(b.doc=d?h(this):b.doc,a=new s(b,h(this)),h(this).data("__nicescroll",a)),c.push(a)}),1==c.length?c[0]:c},window.NiceScroll={getjQuery:function(){return b}},h.nicescroll||(h.nicescroll=new w,h.nicescroll.options=p)}(jQuery);